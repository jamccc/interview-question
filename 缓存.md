## 缓存

1. 使用缓存可以降低资源的重复加载，可以显著减少网络传输带来的性能损耗。从而提高页面的记载速度。
2. 缓存分类：
   - 强缓存
  - 协商缓存
3. 强缓存： 缓存器件浏览器不需要请求服务器。state code = 200
   expires: HTTP1.0的产物，表示在一定的事件点过期，缺点：受本地时间的限制，修改了本地时间，缓存无效。
   cache-control:HTTP1.1的产物，表示在事件间隔后过期，优先级高于expires。
4. 协商缓存：需要浏览器和服务器的共同实现，发送请求，返回304
   Last-Modified：表示本地文件最后修改的日期。if-modified-since会将last-modified的值发送给服务器，询问文件是否有更新。缺点：本地文件真实打开但未修改也会视为更新。
   Etag：询问本地文件是否有变更.if-none-match会将etag的值发送给服务器，询问文件是否有变更。
5. 选择合适的缓存
   - 对于不需要缓存的资源使用cache-control：no-cache，表示不需要缓存
   - 对于频繁变动的资源，可以使用cache-control：no-cache并配合Etag使用。
   - 对于文件代码来说，使用cache-control：max-age=31536000,并配合缓存策略使用.

## service worker

service worker是运行在浏览器背后的独立线程。本质上可以充当web应用程序与浏览器之间的代理服务器，也可在网络可用时作为浏览器和网络间的代理。目前这个技术用来做缓存文件，他可以自由控制缓存哪些文件，如何缓存等。并且缓存是持续性的。提高首屏速度，此技术还可以拦截网络请求。使用service worker传输协议必须是HTTPS协议。
实现缓存功能分为三个步骤：
1. 首先注册service worker
2. 监听install事件后就可以缓存需要的文件
3. 可以通过**拦截请求的方式**查询是否存在缓存，如果存在直接读取缓存文件。否则使用fetch函数请求数据。

## Menory cache

内存缓存，缓存数据量小，读取缓存速度高效，缓存时间比较短，会随着进程的释放而释放。

## Disk Cache

硬盘缓存，存储数据量大，读取时间慢，但是存储时间久。

## push Cache

HTTP/2中的内容，并且缓存时间比较短暂，只在会话中存在，一旦会话结束就被释放。缓存的资源只能被使用一次。